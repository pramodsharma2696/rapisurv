<div class="row mt-5">
    <div class="col-md-6">
        <div class="assign_check">
            <label class="mr-2">
                <mat-checkbox class="mr-2" style="margin-bottom: 0;" color="primary" [(ngModel)]="isAssignwork"
                    (change)="onClickAssignWork()" [disabled]="!istimesheetopen"></mat-checkbox> Assign Work
            </label>
        </div>
    </div>
    <div class="col-md-6">
        <div class="year_week float-right">
            <div class="mb-3 header_pr_name">
                <div class="search_input">
                    <input type="text" class="form-control" placeholder="Search by workerâ€™s ID or Name"
                        style="padding: 4px 37px; width: 91%; float: left;" (keyup)="applyFilter($event)" />
                    <i class="material-icons">search</i>
                </div>
            </div>
            <div class="invites_pending">
                <!-- <p>3 pending invites</p> -->
                <button class="btn btn-block create_btn " outline status="primary" nbButton size="small"
                    (click)="inviteWorker()">
                    <i class="material-icons mr-2">person_add_alt</i> Invite Workers
                </button>
                <p (click)="exportLocalWorker()" class="mt-2 mb-2" style="color: rgb(52, 160, 226); cursor: pointer; ">
                    Export Local Workers</p>
            </div>
        </div>
    </div>

</div>
<!-- workers-table.component.html -->

<table mat-table [dataSource]="dataSource" class="mat-elevation-z8 mt-1">
    <!-- Worker ID Column -->
    <ng-container matColumnDef="worker_id">
        <th mat-header-cell *matHeaderCellDef> Worker ID</th>
        <td mat-cell *matCellDef="let element" style="width: 10%;"> {{element.worker_id}} </td>
    </ng-container>

    <!-- First Name Column -->
    <ng-container matColumnDef="first_name">
        <th mat-header-cell *matHeaderCellDef> First Name </th>
        <td mat-cell *matCellDef="let element" style="width: 10%;"> {{element.first_name}} </td>
    </ng-container>

    <!-- Last Name Column -->
    <ng-container matColumnDef="last_name">
        <th mat-header-cell *matHeaderCellDef> Last Name </th>
        <td mat-cell *matCellDef="let element" style="width: 10%;"> {{element.last_name}}</td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let element" style="width: 10%;">
            <mat-select class="select_status" [(ngModel)]="element.status"
                (selectionChange)="updateStatus(element.id,element.status)" [disabled]="!istimesheetopen">
                <mat-option class="active_colum" value="active">Active</mat-option>
                <mat-option class="inactive_colum" value="inactive">Inactive</mat-option>
            </mat-select>
        </td>
    </ng-container>

    <!-- Planned Hours Column -->
    <ng-container matColumnDef="planned_hours">
        <th mat-header-cell *matHeaderCellDef> Planned Hours </th>
        <td mat-cell *matCellDef="let element" style="width: 10%;">
            <input matInput type="number" class="planned_hours" [(ngModel)]="element.planned_hours"
                (blur)="updatePlannedHours(element.id, element.planned_hours)" [disabled]="!istimesheetopen">
        </td>
    </ng-container>

    <!-- Planned Hours Column -->
    <ng-container matColumnDef="work_assignment">
        <th mat-header-cell *matHeaderCellDef> Work Assignment </th>
        <td mat-cell *matCellDef="let element" style="width: 35%;">
            <span class="assign_work" *ngFor="let item of element.work_assignment">{{ item }}</span>

            <!-- <span class="assign_work">Clearing</span>
            <span class="assign_work">Clearing</span>
            <span class="assign_work">Demolition</span>
            <span class="assign_work">Farming</span> 
            <span class="assign_work">Clearing</span>
            <span class="assign_work">Clearing</span>
            <span class="assign_work">Clearing</span> -->
            
        </td>
    </ng-container>

    <ng-container matColumnDef="assign_work">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td mat-cell *matCellDef="let element">
            <button class="btn assign_work_btn" status="primary" nbButton size="small" (click)="assignWork(element.id, element)">
                Assign Work </button>
        </td>
    </ng-container>



    <!-- Define the table rows -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<mat-paginator [pageSize]="10"></mat-paginator>